<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>DataGraph Structure</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-theme.min.css" rel="stylesheet">

    <link rel="stylesheet"
          href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="../../src/main/base/resources/js/html5shiv.min.js"></script>
    <script src="../../src/main/base/resources/js/respond.min.js"></script>
    <![endif]-->

    <style type="text/css">

        ul.no-bullet
        {
            list-style: none;
        }

        .doc-nav
        {
            width: 30ex;
            border: 1px solid #666;
            background: #f0f0f0;
            display: block;
            position: fixed;
            top: 1ex;
            right: 1ex;
            list-style: none;
            padding: 0;
        }
    </style>

</head>
<body>
<div id="root">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div><ul class="doc-nav"><li><a class="btn btn-link" href="index.html">Overview</a></li><li><a class="btn btn-link" href="action.html">Exceed Action System</a></li><li><a class="btn btn-link" href="data-graph.html">DataGraph Structure</a></li><li><a class="btn btn-link" href="types.html">Exceed Type System</a></li><li><a class="btn btn-link" href="model.html">Model Docs</a></li><li><a class="btn btn-link" href="component.html">Component Docs</a></li><li><a class="btn btn-link" href="expression.html">Expression Docs</a></li><li><a class="btn btn-link" href="class-index.html">Components by class</a></li></ul><div><h2 id="datagraph-structure">DataGraph Structure</h2>
<p>In addition to the <a href="./types.html">complex property types (<em>List</em>,<em>Map</em> and <em>DomainType</em>)</a> we support another, partially self-describing
data structure as output format of our data queries which we call data graph. </p>
<p>On the java side the data graph is represented as de.quinscape.exceed.runtime.component.DataGraph instance, for Javascript
it is a plain JSON structure.</p>
<p>Example:</p>
<pre><code>{
    <span class="hljs-attr">"type"</span> : <span class="hljs-string">"OBJECT"</span> | <span class="hljs-string">"ARRAY"</span>,
    <span class="hljs-attr">"columns"</span> : &lt;map of column descriptors&gt;,
    <span class="hljs-attr">"rootObject"</span> : &lt;object or array&gt;,
    <span class="hljs-attr">"count"</span> : &lt;row count&gt;,
    <span class="hljs-attr">"qualifier"</span> : [qualifier-string]
}
</code></pre><p>The <em>type</em> property contains either the value &quot;OBJECT&quot; or &quot;ARRAY&quot;, describing the nature of the <em>rootObject</em> object and the exact
meaning of the <em>column</em> map which contains property models in any case.</p>
<h2 id="array-graphs">ARRAY Graphs</h2>
<p>For data graphs of type &quot;ARRAY&quot;, the root object is an array of complex objects. Each property of those complex objects has
an entry in the columns map.</p>
<pre><code>{
    <span class="hljs-attr">"type"</span> : <span class="hljs-string">"ARRAY"</span>,
    <span class="hljs-attr">"columns"</span>: {
        <span class="hljs-attr">"name"</span>: {
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"name"</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"PlainText"</span>,
            <span class="hljs-attr">"domainType"</span>: <span class="hljs-string">"Foo"</span>,
            <span class="hljs-attr">"data"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">"config"</span> : {
                <span class="hljs-attr">"queryName"</span> : <span class="hljs-string">"q"</span>
            }
        },
        <span class="hljs-attr">"num"</span>: {
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"num"</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Integer"</span>,
            <span class="hljs-attr">"domainType"</span>: <span class="hljs-string">"Foo"</span>,
            <span class="hljs-attr">"data"</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">"config"</span> : {
                <span class="hljs-attr">"queryName"</span> : <span class="hljs-string">"q"</span>
            }
        }
    },
    <span class="hljs-attr">"rootObject"</span>: [
        {
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"TestFoo"</span>,
            <span class="hljs-attr">"num"</span>: <span class="hljs-number">123</span>
        },
        {
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"TestFoo #2"</span>,
            <span class="hljs-attr">"num"</span>: <span class="hljs-number">234</span>
        }
    ],
    <span class="hljs-attr">"count"</span> : <span class="hljs-number">2</span>
}
</code></pre><p>The columns map describes two properties <em>name</em> and <em>num</em> which are <em>PlainText</em> and <em>Integer</em> respectively. For queries, the column property
will also contain a <em>domainType</em> field to mark the property as originally belonging to that domain type. The name field will reflect the original
name within the domain type in that case (while the columns key always describes the column name as it is in the current data graph).</p>
<p>Query graphs will also contain an <em>queryName</em> config value describing the type name or alias the column belongs to within the query (if the query
executor supports that).  </p>
<p>In case of a paginated result graph, the <em>count</em> field contains the number of result rows available.</p>
<h2 id="object-graphs">OBJECT graphs</h2>
<p>Data graphs of type &quot;OBJECT&quot; have a single complex object as <em>rootObject</em>. They can have a single column &quot;*&quot; in which
case all properties of the object will be of that type (Java Map<String,T> equivalent) . 
Otherwise each column entry has its own type idenfified by its name.</p>
</div></div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
